# Места сохранения, добавления и удаления данных в проекте

---

## 1. Добавление нового упражнения (только в ExercisesPage, сохраняется в состоянии, не в localStorage)
- **Файл:** src/app/exercises/page.tsx
- **Функция:** addExercise
- **Описание:** Добавляет новое упражнение в список упражнений на странице "База упражнений" (только в памяти, не сохраняется в localStorage или БД).

---

## 2. Добавление/редактирование/удаление тренировки и упражнений в тренировке
- **Файлы:**
  - src/app/workouts/new/edit/page.tsx
  - src/app/workouts/[id]/edit/page.tsx
- **Функции:**
  - handleAddExerciseToWorkout — добавляет упражнение в текущую тренировку (в состоянии компонента)
  - handleAddNewExerciseToWorkoutAndBase — добавляет новое упражнение в тренировку и базу упражнений (в состоянии компонента)
  - handleRemoveExercise — удаляет упражнение из текущей тренировки (в состоянии компонента)
  - handleSave — сохраняет тренировку (новую или отредактированную) в localStorage через saveWorkout
  - handleDeleteWorkout — удаляет тренировку из localStorage через removeWorkout
- **Описание:** Все изменения сохраняются в localStorage через функции saveWorkout/removeWorkout из src/lib/storage.ts

---

## 3. Сохранение/удаление тренировок в localStorage
- **Файл:** src/lib/storage.ts
- **Функции:**
  - saveWorkout — сохраняет тренировку (новую или изменённую) в localStorage
  - removeWorkout — удаляет тренировку из localStorage

---

## 4. Завершение тренировки (WorkoutSessionPage)
- **Файл:** src/app/workouts/[id]/session/page.tsx
- **Функция:** handleFinish
- **Описание:**
  - При завершении тренировки результат теперь сохраняется в журнал (localStorage, ключ journal_db_v1) через saveJournalEntry.
  - Для статических упражнений в журнал записывается разница между выбранным итоговым временем (selectedTime) и тем, что осталось на таймере (selectedTime - timer) — это и есть реально отработанное время (в формате ММ:СС).
  - Для динамических упражнений сохраняется итоговое количество повторов.
  - Итоговое время для статики теперь задаётся до старта упражнения, а после старта фиксируется и не меняется, таймер сверху отсчитывает реальное время выполнения.

---

## 5. Журнал (JournalPage)
- **Файл:** src/app/journal/page.tsx
- **Описание:**
  - Журнал теперь отображает реальные завершённые тренировки из localStorage (getJournal).
  - Для каждой тренировки можно раскрыть подробности (Accordion от shadcn/ui): видно дату, название тренировки, список упражнений с результатами (без типа упражнения).
  - Для статических упражнений результат — реально выполненное время, для динамических — количество повторов.

---

## 6. Общий вывод
- Все реальные сохранения происходят только для тренировок (Workout) и журнала (JournalEntry) — всё хранится в localStorage.
- Журнал теперь отражает реальные результаты, включая точное время выполнения статики и количество повторов для динамики. 